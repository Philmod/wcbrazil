extends layout

block content

  div(class="main container" ng-controller='AppCtrl')

    //- Games scores.
    div(class='row games' ng-controller='GamesCtrl')
      div(class='game col-sm-{{12/games.length}}' ng-repeat='game in games')
        h2 
          {{game.teams[0]}}
          |  vs 
          {{game.teams[1]}}
        p.time
          {{game.time | hours }}
          |  h  
          {{game.time | minutes }}
        .scoresText
          h3
            {{game.score[0]}}
            |  - 
            {{game.score[1]}}
        .scores
          div(id="flip" class='games score play')
            ul(class="flip {{(game.teams[0] + game.teams[1] + 0) | removeSpace}}")
              - for (var i = 0; i < 10; ++i) {
                li
                  a(href='#')
                    .up
                      .shadow
                      .inn 
                        =i
                    .down
                      .shadow
                      .inn 
                        =i
              - }
          .dash
            h3
              -
          div(id="flip" class='games score play')
            ul(class="flip {{(game.teams[0] + game.teams[1] + 1) | removeSpace}}")
              - for (var i = 0; i < 10; ++i) {
                li
                  a(href='#')
                    .up
                      .shadow
                      .inn 
                        =i
                    .down
                      .shadow
                      .inn 
                        =i
              - }
          

    .row
      #livefyre-comments.col-sm-6

      div(class='col-sm-6 bets' ng-controller='BetsCtrl')
        table(class='table table-hover table-curved')
          thead
            tr
              th
              th And the winner is...
              th
          tbody
            tr(ng-repeat='bet in bets' ng-class="{ 'success': bet.difference===1, 'danger': bet.difference===-1, 'warning': bet.difference===0 }")
              td
                {{$index+1}}
              td 
                {{bet.user}}
              td
                {{bet.points}}


  //- Bootstrap core JavaScript
  //- Placed at the end of the document so the pages load faster 
  script(src='/socket.io/socket.io.js')
  script(src='bower_components/angular/angular.js')
  script(src='bower_components/angular-route/angular-route.js')
  script(src='bower_components/angular-socket-io/socket.js')
  script(src='js/lib/jquery/jquery-2.0.3.min.js')
  script(src='bootstrap/js/bootstrap.min.js')
  script(src='bootstrap/js/holder.js')
  script(src='js/app.js')
  script(src='js/services.js')
  script(src='js/controllers.js')
  script(src='js/filters.js')
  script(src='http://zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js')

  //- Variables passed from expressjs.
  script.
    var games = !{JSON.stringify(games)}
    var bets = !{JSON.stringify(bets)}

  //- Livefyre comments
  script.
    var articleId = fyre.conv.load.makeArticleId(null);
    fyre.conv.load({}, [{
        el: 'livefyre-comments',
        network: "livefyre.com",
        siteId: "358978",
        articleId: articleId,
        signed: false,
        collectionMeta: {
            articleId: articleId,
            url: fyre.conv.load.makeCollectionUrl(),
        }
    }], function() {});
